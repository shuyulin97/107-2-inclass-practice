---
title: '2019-05-08'
author: "ShuYu"
date: "2019年5月8日"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
library(lubridate); library(stringr); library(dplyr); library(readr); library(purrr)
```



#ans1:要轉成數字才能和數字比較
請產生一個logical class答案物件名為logicBig，其中元素值為TRUE若x對應值大於50（不包含50），反之為FALSE。答案物件請寫在最後一行。
```{r}
x <- as.character(round(runif(10)*100),10)
x
logicBig <- (as.integer(x) > 50)

logicBig
```

#ans3:要記得as.character轉成字串物件
請將它改成以America/New_York時區顯示的「character class」文字字串，並存在答案物件nyTime。答案物件請寫在最後一行。（注意答案物件class必修為character）
```{r}
load("C:/Users/user/Desktop/R/midterm/submitTime.Rda")
mdy_hms(submitTime)-> submitTime1
with_tz(submitTime1,tzone = "America/New_York") -> nyTime
as.character(nyTime) -> nyTime 
nyTime
```

## 5
執行以下程式產生台灣民國年月字串物件twDates。
```{r data5}
sample(99:103,15,replace = T)-> yy
sample(1:12,15,replace=T)-> mm
str_c("民國",str_pad(yy,3,"left","0"),"年",mm,"月") -> twDates
twDates
```

#an5.1:也可以用以下寫法str_replace_all更快
請將twDates中的"民國"及"月"都去除，並存在twDates2答案物件，如："民國099年2月"會變成"099年2"。
```{r}
twDates2 <- str_replace_all(twDates,"(民國)|(月)","")
```

#ans5.3:萬一順序不一樣不能慢慢數str_sub
```{r}
#tip
datesplit <- str_split(twDates2, "年") #拆開來
datesplit

monthlist <- map(datesplit,~.[[2]]) #選出要的
monthlist

monthvecter <- unlist(monthlist) #不要list
monthvecter

#組合
class(twDates2)
year <- str_sub(twDates2, 1, 3)
year <- as.integer(year)
class(year)
westYears <- year+1911
westYears <- as.integer(westYears)
class(westYears) 
westYears #以上是5.2前置作業
westDates <- str_c(as.character(westYears), month, "01", sep = "-") #stringr裡面的東西要是字串

#轉成datetime
westDates <- ymd(westDates)
class(westDates)
westDates
```


## 7 成績單 sampledTranscriptData
請先執行以下程式取得學生成績單資料sampledTranscriptData，它是個list class的物件。
```{r data7}
load("C:/Users/user/Desktop/R/midterm/sampledTranscriptData.Rda")
names(sampledTranscriptData) <- 
  c('學號','學期成績','學分數','學年','學期','必選修類別（必／選／通）','系級','科目名稱','年級','學屆')
```




